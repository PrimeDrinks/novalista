<!DOCTYPE html>
<html lang="pt-BR">
<head>
Â  <meta charset="UTF-8" />
Â  <title>CatÃ¡logo â€“ Prime Drinks Express</title>
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />

Â  Â  <meta name="theme-color" content="#0f4fa8" />
Â  <link rel="manifest" href="manifest.json" />
Â  <link rel="icon" href="icons/icon-192.png" />

Â  <style>
Â  Â  /* TÃ­tulo "PEDIDOS ONLINE" com efeito neon + gradiente + contorno + sombra + animaÃ§Ã£o */
Â  Â  .titulo-destaque-neon {
Â  Â  Â  font-size: 2.1rem;Â  Â  Â  Â  Â  Â  Â  Â  Â /* ligeiramente maior */
Â  Â  Â  font-weight: 900;
Â  Â  Â  text-transform: uppercase;
Â  Â  Â  letter-spacing: 0.08em;

Â  Â  Â  /* GRADIENTE aplicado no texto */
Â  Â  Â  background: linear-gradient(90deg, #facc15, #fb923c, #f97316);
Â  Â  Â  -webkit-background-clip: text;
Â  Â  Â  background-clip: text;
Â  Â  Â  color: transparent;

Â  Â  Â  /* CONTORNO do texto */
Â  Â  Â  -webkit-text-stroke: 1px rgba(15, 23, 42, 0.9);
Â  Â  Â  text-stroke: 1px rgba(15, 23, 42, 0.9);

Â  Â  Â  /* SOMBRA / GLOW estilo neon */
Â  Â  Â  text-shadow:
Â  Â  Â  Â  0 0 6px rgba(250, 204, 21, 0.8),
Â  Â  Â  Â  0 0 12px rgba(249, 115, 22, 0.7),
Â  Â  Â  Â  0 0 18px rgba(249, 115, 22, 0.4);

Â  Â  Â  /* ANIMAÃ‡ÃƒO pulsante */
Â  Â  Â  animation: neonPulse 1.8s ease-in-out infinite;
Â  Â  }

Â  Â  /* AnimaÃ§Ã£o â€“ respira, aumenta/brilha e volta */
Â  Â  @keyframes neonPulse {
Â  Â  Â  0% {
Â  Â  Â  Â  transform: scale(1);
Â  Â  Â  Â  text-shadow:
Â  Â  Â  Â  Â  0 0 4px rgba(250, 204, 21, 0.7),
Â  Â  Â  Â  Â  0 0 8px rgba(249, 115, 22, 0.5),
Â  Â  Â  Â  Â  0 0 12px rgba(249, 115, 22, 0.3);
Â  Â  Â  }
Â  Â  Â  50% {
Â  Â  Â  Â  transform: scale(1.04);
Â  Â  Â  Â  text-shadow:
Â  Â  Â  Â  Â  0 0 8px rgba(250, 204, 21, 1),
Â  Â  Â  Â  Â  0 0 16px rgba(249, 115, 22, 0.9),
Â  Â  Â  Â  Â  0 0 26px rgba(249, 115, 22, 0.6);
Â  Â  Â  }
Â  Â  Â  100% {
Â  Â  Â  Â  transform: scale(1);
Â  Â  Â  Â  text-shadow:
Â  Â  Â  Â  Â  0 0 4px rgba(250, 204, 21, 0.7),
Â  Â  Â  Â  Â  0 0 8px rgba(249, 115, 22, 0.5),
Â  Â  Â  Â  Â  0 0 12px rgba(249, 115, 22, 0.3);
Â  Â  Â  }
Â  Â  }

Â  Â  :root {
Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  background: #f3f4f6;
Â  Â  Â  color: #0f172a;
Â  Â  }

Â  Â  body {
Â  Â  Â  margin: 0;
Â  Â  Â  background: #f3f4f6;
Â  Â  }

Â  Â  /* HEADER */
Â  Â  header {
Â  Â  Â  background: linear-gradient(135deg, #0f4fa8, #1d73d6);
Â  Â  Â  color: white;
Â  Â  Â  padding: 24px 16px 28px;
Â  Â  Â  text-align: left;
Â  Â  }

Â  Â  .header-content {
Â  Â  Â  max-width: 900px;
Â  Â  Â  margin: 0 auto;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: row;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 16px;
Â  Â  }

Â  Â  .header-text {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  }

Â  Â  header h1 {
Â  Â  Â  margin: 4px 0 8px;
Â  Â  Â  font-size: 1.9rem;
Â  Â  Â  font-weight: 800;
Â  Â  }

Â  Â  .badge-Localidade {
Â  Â  Â  margin-top: 10px;
Â  Â  Â  padding: 4px 10px;
Â  Â  Â  background: rgba(255, 255, 255, 0.16);
Â  Â  Â  border-radius: 999px;
Â  Â  Â  border: 1px solid rgba(255,255,255,0.4);
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  max-width: 650px;
Â  Â  }

Â  Â  .header-info {
Â  Â  Â  margin-top: 8px;
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  opacity: 0.95;
Â  Â  }

Â  Â  /* PROMOÃ‡ÃƒO EM DESTAQUE */
Â  Â  .promo-section {
Â  Â  Â  max-width: 900px;
Â  Â  Â  margin: 10px auto 0;
Â  Â  Â  padding: 0 16px 8px;
Â  Â  }

Â  Â  .promo-title {
Â  Â  Â  font-size: 0.95rem;
Â  Â  Â  font-weight: 700;
Â  Â  Â  margin-bottom: 6px;
Â  Â  Â  color: #1f2937;
Â  Â  }

Â  Â  .promo-card {
Â  Â  Â  background: linear-gradient(135deg, #f97316, #ea580c);
Â  Â  Â  border-radius: 16px;
Â  Â  Â  padding: 10px 14px;
Â  Â  Â  color: #fff7ed;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 4px;
Â  Â  Â  box-shadow: 0 6px 14px rgba(0,0,0,0.18);
Â  Â  }

Â  Â  .promo-label {
Â  Â  Â  font-size: 0.75rem;
Â  Â  Â  text-transform: uppercase;
Â  Â  Â  letter-spacing: 0.08em;
Â  Â  Â  opacity: 0.9;
Â  Â  }

Â  Â  .promo-name {
Â  Â  Â  font-size: 1rem;
Â  Â  Â  font-weight: 800;
Â  Â  }

Â  Â  .promo-desc {
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  opacity: 0.95;
Â  Â  }

Â  Â  .promo-bottom {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  margin-top: 4px;
Â  Â  Â  gap: 8px;
Â  Â  Â  flex-wrap: wrap;
Â  Â  }

Â  Â  .promo-price {
Â  Â  Â  font-size: 1rem;
Â  Â  Â  font-weight: 800;
Â  Â  }

Â  Â  .promo-btn {
Â  Â  Â  background: #22c55e;
Â  Â  Â  color: white;
Â  Â  Â  border-radius: 999px;
Â  Â  Â  padding: 6px 12px;
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  font-weight: 700;
Â  Â  Â  text-decoration: none;
Â  Â  Â  display: inline-flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 4px;
Â  Â  Â  border: none;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .promo-btn:hover {
Â  Â  Â  filter: brightness(0.93);
Â  Â  }

Â  Â  /* FILTROS (busca + categoria) */
Â  Â  .filters {
Â  Â  Â  max-width: 900px;
Â  Â  Â  margin: 14px auto 0;
Â  Â  Â  padding: 0 16px 4px;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 8px;
Â  Â  }

Â  Â  .filters input,
Â  Â  .filters select {
Â  Â  Â  padding: 9px 12px;
Â  Â  Â  border-radius: 999px;
Â  Â  Â  border: 1px solid #cbd5f5;
Â  Â  Â  background: white;
Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  outline: none;
Â  Â  Â  box-sizing: border-box;
Â  Â  }

Â  Â  .filters input:focus,
Â  Â  .filters select:focus {
Â  Â  Â  border-color: #1d4ed8;
Â  Â  Â  box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.25);
Â  Â  }

Â  Â  @media (min-width: 640px) {
Â  Â  Â  .filters {
Â  Â  Â  Â  flex-direction: row;
Â  Â  Â  }
Â  Â  Â  .filters input {
Â  Â  Â  Â  flex: 2;
Â  Â  Â  }
Â  Â  Â  .filters select {
Â  Â  Â  Â  flex: 1;
Â  Â  Â  }
Â  Â  }

Â  Â  /* ATALHOS POR CATEGORIA */
Â  Â  .category-shortcuts {
Â  Â  Â  max-width: 900px;
Â  Â  Â  margin: 4px auto 0;
Â  Â  Â  padding: 0 16px 4px;
Â  Â  Â  display: flex;
Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  gap: 6px;
Â  Â  }

Â  Â  .cat-pill {
Â  Â  Â  padding: 5px 10px;
Â  Â  Â  border-radius: 999px;
Â  Â  Â  border: 1px solid #cbd5f5;
Â  Â  Â  background: white;
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .cat-pill-active {
Â  Â  Â  background: #0f4fa8;
Â  Â  Â  color: white;
Â  Â  Â  border-color: #0f4fa8;
Â  Â  }

Â  Â  main {
Â  Â  Â  max-width: 900px;
Â  Â  Â  margin: auto;
Â  Â  Â  padding: 12px 16px 18px;
Â  Â  }

Â  Â  .grid {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
Â  Â  Â  gap: 14px;
Â  Â  }

Â  Â  /* CARDS */
Â  Â  .card {
Â  Â  Â  background: white;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  overflow: hidden;
Â  Â  Â  box-shadow: 0 4px 12px rgba(15,23,42,0.12);
Â  Â  Â  border: 1px solid #e2e8f0;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  }

Â  Â  .card img {
Â  Â  Â  width: 100%;
Â  Â  Â  height: 130px;
Â  Â  Â  object-fit: contain;
Â  Â  Â  background: #ffffff;
Â  Â  }

Â  Â  .card-body {
Â  Â  Â  padding: 8px 10px;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 4px;
Â  Â  }

Â  Â  .card-title {
Â  Â  Â  font-size: 0.98rem;
Â  Â  Â  font-weight: 700;
Â  Â  }

Â  Â  .category {
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  background: #e0edff;
Â  Â  Â  padding: 3px 9px;
Â  Â  Â  border-radius: 999px;
Â  Â  Â  color: #1d4ed8;
Â  Â  Â  font-weight: 600;
Â  Â  }

Â  Â  .price {
Â  Â  Â  color: #16a34a;
Â  Â  Â  font-weight: bold;
Â  Â  Â  margin-top: 2px;
Â  Â  Â  font-size: 0.95rem;
Â  Â  }

Â  Â  .stock {
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  color: #6b7280;
Â  Â  }

Â  Â  .stock-zero {
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  color: #b91c1c;
Â  Â  Â  font-weight: 600;
Â  Â  }

Â  Â  .card-footer {
Â  Â  Â  padding: 0 10px 10px;
Â  Â  Â  margin-top: auto;
Â  Â  }

Â  Â  .qty-row {
Â  Â  Â  display: flex;
Â  Â  Â  gap: 8px;
Â  Â  Â  align-items: center;
Â  Â  }

Â  Â  .qty-row input[type="number"] {
Â  Â  Â  width: 70px;
Â  Â  Â  padding: 4px 6px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  border: 1px solid #cbd5f5;
Â  Â  Â  font-size: 0.9rem;
Â  Â  }

Â  Â  .btn-add {
Â  Â  Â  flex: 1;
Â  Â  Â  padding: 6px 8px;
Â  Â  Â  border-radius: 999px;
Â  Â  Â  border: none;
Â  Â  Â  background: #0f4fa8;
Â  Â  Â  color: white;
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  font-weight: 600;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .btn-add:hover {
Â  Â  Â  filter: brightness(0.95);
Â  Â  }

Â  Â  .btn-add-disabled {
Â  Â  Â  background: #9ca3af;
Â  Â  Â  cursor: not-allowed;
Â  Â  }

Â  Â  /* CARRINHO */
Â  Â  .cart {
Â  Â  Â  max-width: 900px;
Â  Â  Â  margin: 0 auto 24px;
Â  Â  Â  padding: 12px 16px 16px;
Â  Â  Â  background: white;
Â  Â  Â  border-radius: 16px;
Â  Â  Â  border: 1px solid #e2e8f0;
Â  Â  Â  box-shadow: 0 4px 12px rgba(15,23,42,0.12);
Â  Â  }

Â  Â  .store-status {
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  margin-bottom: 6px;
Â  Â  }

Â  Â  .store-open {
Â  Â  Â  color: #16a34a;
Â  Â  }

Â  Â  .store-closed {
Â  Â  Â  color: #b91c1c;
Â  Â  }

Â  Â  .cart-title {
Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  font-weight: 700;
Â  Â  Â  margin-bottom: 8px;
Â  Â  }

Â  Â  .cart-items {
Â  Â  Â  margin-top: 4px;
Â  Â  Â  margin-bottom: 8px;
Â  Â  }

Â  Â  .cart-empty {
Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  color: #6b7280;
Â  Â  }

Â  Â  .cart-item {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  padding: 4px 0;
Â  Â  Â  border-bottom: 1px solid #e5e7eb;
Â  Â  }

Â  Â  .cart-item:last-child {
Â  Â  Â  border-bottom: none;
Â  Â  }

Â  Â  .cart-item-left {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  }

Â  Â  .cart-item-name {
Â  Â  Â  font-weight: 600;
Â  Â  }

Â  Â  .cart-item-qty {
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  color: #6b7280;
Â  Â  }

Â  Â  .cart-item-right {
Â  Â  Â  text-align: right;
Â  Â  Â  font-weight: 600;
Â  Â  }

Â  Â  .cart-summary {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  margin-top: 8px;
Â  Â  Â  font-size: 0.95rem;
Â  Â  }

Â  Â  .cart-summary strong {
Â  Â  Â  font-size: 1rem;
Â  Â  Â  color: #16a34a;
Â  Â  }

Â  Â  .btn-whatsapp-cart {
Â  Â  Â  margin-top: 10px;
Â  Â  Â  width: 100%;
Â  Â  Â  background: #25d366;
Â  Â  Â  color: white;
Â  Â  Â  padding: 10px;
Â  Â  Â  border-radius: 999px;
Â  Â  Â  border: none;
Â  Â  Â  font-weight: 700;
Â  Â  Â  font-size: 0.95rem;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .btn-whatsapp-cart:disabled {
Â  Â  Â  opacity: 0.5;
Â  Â  Â  cursor: not-allowed;
Â  Â  }

Â  Â  .cart-hint {
Â  Â  Â  margin-top: 6px;
Â  Â  Â  font-size: 0.78rem;
Â  Â  Â  color: #6b7280;
Â  Â  }

Â  Â  footer {
Â  Â  Â  text-align: center;
Â  Â  Â  font-size: 0.75rem;
Â  Â  Â  color: #6b7280;
Â  Â  Â  padding: 8px 0 14px;
Â  Â  }

Â  Â  .delivery-neighborhood-group,
Â  Â  .payment-group,
Â  Â  .order-type-group,
Â  Â  .notes-group {
Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 4px;
Â  Â  }

Â  Â  .delivery-neighborhood-group select,
Â  Â  .payment-group select,
Â  Â  .order-type-group select {
Â  Â  Â  padding: 8px 10px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  border: 1px solid #cbd5f5;
Â  Â  Â  font-size: 0.9rem;
Â  Â  }

Â  Â  .payment-group small {
Â  Â  Â  font-size: 0.75rem;
Â  Â  Â  color: #6b7280;
Â  Â  }

Â  Â  .notes-group textarea {
Â  Â  Â  width: 100%;
Â  Â  Â  min-height: 60px;
Â  Â  Â  resize: vertical;
Â  Â  Â  padding: 8px 10px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  border: 1px solid #cbd5f5;
Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  box-sizing: border-box;
Â  Â  }

Â  Â  .cart-summary-line {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  margin-top: 4px;
Â  Â  }
Â  </style>
</head>
<body>

<header>
Â  <div class="header-content">
Â  Â  <img src="logo-prime.png"
Â  Â  Â  Â  Â alt="Logo Prime Drinks Express"
Â  Â  Â  Â  Â style="width: 110px; height: auto; border-radius: 12px;">

Â  Â  <div class="header-text">
Â  Â  Â  <h1 class="titulo-destaque-neon">PEDIDOS ONLINE</h1>
Â  Â  Â  <h1>Prime Drinks Express</h1>
Â  Â  Â  <h1>Bebidas Express em VÃ¡rzea da Abelha</h1>
Â  Â  Â  <p class="badge-Localidade">
Â  Â  Â  Â  Atendendo na VÃ¡rzea da Abelha e regiÃ£o â€¢ FaÃ§a seu Pedido e envie para o WhatsApp 98684-7828 â€¢ Cobramos taxa de entrega
Â  Â  Â  </p>
Â  Â  Â  <div class="header-info">
Â  Â  Â  Â  Monte seu pedido aqui e clique em <strong>â€œFinalizar pedido no WhatsAppâ€</strong> para combinar pagamento e entrega.
Â  Â  Â  </div>
Â  Â  </div>
Â  </div>
</header>

<section id="promoSection" class="promo-section">
Â  <div class="promo-title">ğŸ”¥ PromoÃ§Ã£o em destaque</div>
Â  <div id="promoCard" class="promo-card"></div>
</section>

<div class="filters">
Â  <input
Â  Â  id="searchInput"
Â  Â  type="text"
Â  Â  placeholder="Pesquisar pelo nome da bebida (ex.: Heineken, Coca, Skol)..."
Â  />
Â  <select id="categoryFilter">
Â  Â  <option value="">Todas as categorias</option>
Â  </select>
</div>

<div class="category-shortcuts" id="categoryShortcuts"></div>

<main>
Â  Â  <div class="grid" id="productList"></div>

Â  Â  <section class="cart">
Â  Â  <div id="storeStatus" class="store-status"></div>

Â  Â  <div class="cart-title">Seu pedido</div>

    <div class="notes-group" style="margin-bottom: 15px;">
        <label for="inputNome">Seu Nome Completo (ObrigatÃ³rio):</label>
        <input 
            type="text" 
            id="inputNome" 
            placeholder="Nome para registro do pedido"
            style="padding: 8px 10px; border-radius: 8px; border: 1px solid #cbd5f5; font-size: 0.9rem;"
        >
    </div>
    Â  Â  Â  Â  <div class="order-type-group">
Â  Â  Â  <label for="orderType">Como vocÃª prefere receber?</label>
Â  Â  Â  <select id="orderType">
Â  Â  Â  <option value="">Selecione</option>Â  Â  Â  Â Â 
Â  Â  Â  <option value="entrega">Entrega em domicÃ­lio</option>
Â  Â  Â  Â  <option value="retirada">Retirar no local</option>
Â  Â  Â  Â Â 
Â  Â  Â  </select>
Â  Â  </div>

Â  Â  Â  Â  <div class="payment-group">
Â  Â  Â  <label for="paymentMethod">Forma de pagamento:</label>
Â  Â  Â  <select id="paymentMethod">
Â  Â  Â  Â  <option value="">Selecione</option>
Â  Â  Â  </select>
Â  Â  Â  <small>Pagamentos no crÃ©dito tÃªm acrÃ©scimo da maquininha sobre o total (produtos + entrega).</small>
Â  Â  </div>

Â  Â  Â  Â  <div class="delivery-neighborhood-group">
Â  Â  Â  <label for="deliveryNeighborhood">Localidade para entrega:</label>
Â  Â  Â  <select id="deliveryNeighborhood">
Â  Â  Â  Â  <option value="">Selecione a localidade/bairro</option>
Â  Â  Â  </select>
Â  Â  </div>

Â  Â  <div id="cartItems" class="cart-items"></div>

Â  Â  Â  Â  <div class="cart-summary-line">
Â  Â  Â  <span>Subtotal:</span>
Â  Â  Â  <span id="cartSubtotal">R$ 0,00</span>
Â  Â  </div>
Â  Â  <div class="cart-summary-line">
Â  Â  Â  <span>Entrega:</span>
Â  Â  Â  <span id="cartDelivery">R$ 0,00</span>
Â  Â  </div>
Â  Â  <div class="cart-summary-line">
Â  Â  Â  <span>AcrÃ©scimo crÃ©dito:</span>
Â  Â  Â  <span id="cartCreditFee">R$ 0,00</span>
Â  Â  </div>

Â  Â  <div class="cart-summary">
Â  Â  Â  <span>Total:</span>
Â  Â  Â  <strong id="cartTotal">R$ 0,00</strong>
Â  Â  </div>

Â  Â  Â  Â  <div class="notes-group">
Â  Â  Â  <label for="orderNotes">ObservaÃ§Ãµes do pedido (opcional):</label>
Â  Â  Â  <textarea
Â  Â  Â  Â  id="orderNotes"
Â  Â  Â  Â  placeholder="Ex.: ponto de referÃªncia, troco para 100, mandar bem gelada, etc."
Â  Â  Â  ></textarea>
Â  Â  </div>

Â  Â  <button id="whatsCartButton" class="btn-whatsapp-cart" disabled>
Â  Â  Â  Finalizar pedido no WhatsApp
Â  Â  </button>

Â  Â  <p class="cart-hint">
Â  Â  Â  Ao clicar no botÃ£o, abriremos o WhatsApp com o resumo do seu pedido. VocÃª poderÃ¡ confirmar, combinar pagamento (ex.: PIX, cartÃ£o, dinheiro) e entrega diretamente com o atendente.
Â  Â  </p>
Â  </section>
</main>

<footer>
Â  CatÃ¡logo desenvolvido para Prime Drinks Express â€¢ Compartilhe com seus clientes
</footer>

<script>
Â  // NÃºmero do WhatsApp
Â  const WHATSAPP_NUMBER = "5585986847828";

Â  // ğŸš¨ URL EXATA do Web App do Apps Script (MANTENHA A SUA ORIGINAL)
Â  const ORDER_LOG_ENDPOINT = "https://script.google.com/macros/s/AKfycbwupOFNWwQOuz5dgDem1FP-kKUK0g427yDydUjGjeCLOMm4dB_PgqIq0tVv1vNkaNix/exec";

Â  // Links das planilhas (CSV)
Â  const PRODUCTS_SHEET_URL =
Â  Â  "https://docs.google.com/spreadsheets/d/e/2PACX-1vQcX1AMiR5abZ4ZS8R0dRDRCEuFA7Z8F4pxdKnytA4KXSJMv28X3at9GmElefI6fo78Qf04ljMWB2q0/pub?gid=0&single=true&output=csv";

Â  const TAXAS_SHEET_URL =
Â  Â  "https://docs.google.com/spreadsheets/d/e/2PACX-1vQcX1AMiR5abZ4ZS8R0dRDRCEuFA7Z8F4pxdKnytA4KXSJMv28X3at9GmElefI6fo78Qf04ljMWB2q0/pub?gid=1515986149&single=true&output=csv";

Â  // HorÃ¡rio de funcionamento
Â  const SCHEDULE_TEXT =
Â  Â  "TerÃ§a a SÃ¡bado: 8h Ã s 23h; domingo 9h Ã s 21h; segunda: fechado.";

Â  let isOpenNow = true;

Â  function isStoreOpen(now) {
Â  Â  const day = now.getDay(); // 0=Dom, 1=Seg...
Â  Â  const hour = now.getHours() + now.getMinutes() / 60;

Â  Â  switch (day) {
Â  Â  Â  case 1: // Segunda
Â  Â  Â  Â  return false;
Â  Â  Â  case 2: // TerÃ§a
Â  Â  Â  case 3: // Quarta
Â  Â  Â  case 4: // Quinta
Â  Â  Â  case 5: // Sexta
Â  Â  Â  case 6: // SÃ¡bado
Â  Â  Â  Â  return hour >= 8 && hour < 23;
Â  Â  Â  case 0: // Domingo
Â  Â  Â  Â  return hour >= 9 && hour < 21;
Â  Â  Â  default:
Â  Â  Â  Â  return false;
Â  Â  }
Â  }

Â  function checkStoreOpen() {
Â  Â  const now = new Date();
Â  Â  isOpenNow = isStoreOpen(now);

Â  Â  const statusEl = document.getElementById("storeStatus");
Â  Â  if (!statusEl) return;

Â  Â  if (isOpenNow) {
Â  Â  Â  statusEl.textContent =
Â  Â  Â  Â  "Estamos atendendo agora! HorÃ¡rio de funcionamento: " + SCHEDULE_TEXT;
Â  Â  Â  statusEl.classList.remove("store-closed");
Â  Â  Â  statusEl.classList.add("store-open");
Â  Â  } else {
Â  Â  Â  statusEl.textContent =
Â  Â  Â  Â  "Estamos fora do horÃ¡rio de atendimento no momento. Nosso horÃ¡rio Ã©: " + SCHEDULE_TEXT;
Â  Â  Â  statusEl.classList.remove("store-open");
Â  Â  Â  statusEl.classList.add("store-closed");
Â  Â  }

Â  Â  renderCart();
Â  }

Â  // Estado carregado da planilha
Â  let products = [];
Â  let NEIGHBORHOODS = {};
Â  let formaPagamentoTexto = "";

Â  // Carrinho
Â  const cart = [];

Â  // Decide qual preÃ§o usar (normal ou atacado) com base na quantidade no carrinho
Â  function getEffectiveUnitPrice(cartItem) {
Â  Â  const product = products.find(p => p.id == cartItem.id);
Â  Â  if (!product) {
Â  Â  Â  // fallback: se por algum motivo nÃ£o achar, usa o que estiver salvo no item
Â  Â  Â  return cartItem.price || 0;
Â  Â  }

Â  Â  const min = Number(product.atacadoMinQty || 0);
Â  Â  const atacadoPrice = Number(product.priceAtacado || 0);

Â  Â  if (min > 0 && atacadoPrice > 0 && cartItem.quantity >= min) {
Â  Â  Â  return atacadoPrice; // usa preÃ§o atacado
Â  Â  }

Â  Â  return product.price || 0; // usa preÃ§o normal
Â  }

Â  function formatCurrency(value) {
Â  Â  return Number(value || 0).toLocaleString("pt-BR", {
Â  Â  Â  style: "currency",
Â  Â  Â  currency: "BRL"
Â  Â  });
Â  }

Â  // Parser CSV
Â  function parseCSV(text) {
Â  Â  const lines = text.trim().split(/\r?\n/);
Â  Â  if (!lines.length) return [];

Â  Â  const parseLine = (line) => {
Â  Â  Â  const result = [];
Â  Â  Â  let current = "";
Â  Â  Â  let inQuotes = false;

Â  Â  Â  for (let i = 0; i < line.length; i++) {
Â  Â  Â  Â  const char = line[i];
Â  Â  Â  Â  if (char === '"') {
Â  Â  Â  Â  Â  if (inQuotes && line[i + 1] === '"') {
Â  Â  Â  Â  Â  Â  current += '"';
Â  Â  Â  Â  Â  Â  i++;
Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  inQuotes = !inQuotes;
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } else if (char === "," && !inQuotes) {
Â  Â  Â  Â  Â  result.push(current);
Â  Â  Â  Â  Â  current = "";
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  current += char;
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  Â  result.push(current);
Â  Â  Â  return result;
Â  Â  };

Â  Â  const header = parseLine(lines[0]).map(h => h.trim());
Â  Â  const rows = [];

Â  Â  for (let i = 1; i < lines.length; i++) {
Â  Â  Â  const line = lines[i];
Â  Â  Â  if (!line.trim()) continue;
Â  Â  Â  const cols = parseLine(line);
Â  Â  Â  const obj = {};
Â  Â  Â  header.forEach((h, idx) => {
Â  Â  Â  Â  obj[h] = (cols[idx] || "").trim();
Â  Â  Â  });
Â  Â  Â  rows.push(obj);
Â  Â  }

Â  Â  return rows;
Â  }

Â  // Carregar produtos da aba Produtos (com atacado)
Â  async function loadProductsFromSheet() {
Â  Â  const res = await fetch(PRODUCTS_SHEET_URL);
Â  Â  const csv = await res.text();
Â  Â  const rows = parseCSV(csv);

Â  Â  products = rows.map(row => {
Â  Â  Â  // preÃ§o normal (varejo)
Â  Â  Â  const precoStr = row.preco || row["preco"] || "0";
Â  Â  Â  const price = parseFloat(precoStr.replace(".", "").replace(",", ".")) || 0;

Â  Â  Â  const estoqueStr = row.estoque || "0";
Â  Â  Â  const estoque = parseInt(estoqueStr, 10) || 0;

Â  Â  Â  // preÃ§o atacado
Â  Â  Â  const precoAtacadoStr = row.preco_atacado || row["preco_atacado"] || "0";
Â  Â  Â  const priceAtacado = parseFloat(precoAtacadoStr.replace(".", "").replace(",", ".")) || 0;

Â  Â  Â  // quantidade mÃ­nima para atacado
Â  Â  Â  const minAtacadoStr = row.quantidade_minima_atacado || row["quantidade_minima_atacado"] || "0";
Â  Â  Â  const atacadoMinQty = parseInt(minAtacadoStr, 10) || 0;

Â  Â  Â  let img = (row.imagem || "").trim();
Â  Â  Â  if (img && !/^https?:\/\//i.test(img) && !img.startsWith("data:")) {
Â  Â  Â  Â  img = "images/" + img;
Â  Â  Â  }

Â  Â  Â  const promoFlag = (row.promo || "").toString().toLowerCase() === "true";

Â  Â  Â  return {
Â  Â  Â  Â  id: row.id,
Â  Â  Â  Â  name: row.nome,
Â  Â  Â  Â  price,Â  Â  Â  Â  Â  Â  Â  Â  Â // preÃ§o normal
Â  Â  Â  Â  priceAtacado,Â  Â  Â  Â  Â  // preÃ§o atacado
Â  Â  Â  Â  atacadoMinQty,Â  Â  Â  Â  Â // quantidade mÃ­nima atacado
Â  Â  Â  Â  category: row.categoria || "",
Â  Â  Â  Â  estoque,
Â  Â  Â  Â  image: img || "logo-prime.png",
Â  Â  Â  Â  promo: promoFlag
Â  Â  Â  };
Â  Â  });
Â  }

Â  // Carregar bairros + taxa + forma_pagamento
Â  async function loadTaxasFromSheet() {
Â  Â  const res = await fetch(TAXAS_SHEET_URL);
Â  Â  const csv = await res.text();
Â  Â  const rows = parseCSV(csv);

Â  Â  NEIGHBORHOODS = {};
Â  Â  formaPagamentoTexto = "";

Â  Â  rows.forEach(row => {
Â  Â  Â  const bairro = row.bairro || row["bairro"];
Â  Â  Â  if (!bairro) return;
Â  Â  Â  const taxaStr = row.taxa_entrega || row["taxa_entrega"] || "0";
Â  Â  Â  const taxa = parseFloat(taxaStr.replace(".", "").replace(",", ".")) || 0;
Â  Â  Â  NEIGHBORHOODS[bairro] = taxa;

Â  Â  Â  const fp = row.forma_pagamento || row.formas_pagamento || "";
Â  Â  Â  if (!formaPagamentoTexto && fp.trim()) {
Â  Â  Â  Â  formaPagamentoTexto = fp.trim();
Â  Â  Â  }
Â  Â  });

Â  Â  // Bairros
Â  Â  const neighborhoodSelect = document.getElementById("deliveryNeighborhood");
Â  Â  if (neighborhoodSelect) {
Â  Â  Â  neighborhoodSelect.innerHTML =
Â  Â  Â  Â  '<option value="">Selecione a localidade/bairro</option>';
Â  Â  Â  Object.keys(NEIGHBORHOODS).forEach(bairro => {
Â  Â  Â  Â  const opt = document.createElement("option");
Â  Â  Â  Â  opt.value = bairro;
Â  Â  Â  Â  opt.textContent = bairro;
Â  Â  Â  Â  neighborhoodSelect.appendChild(opt);
Â  Â  Â  });
Â  Â  }

Â  Â  // Formas de pagamento
Â  Â  const paymentSelect = document.getElementById("paymentMethod");
Â  Â  if (paymentSelect && formaPagamentoTexto) {
Â  Â  Â  paymentSelect.innerHTML = '<option value="">Selecione</option>';
Â  Â  Â  formaPagamentoTexto.split(",").forEach(item => {
Â  Â  Â  Â  const txt = item.trim();
Â  Â  Â  Â  if (!txt) return;
Â  Â  Â  Â  const opt = document.createElement("option");
Â  Â  Â  Â  opt.value = txt;
Â  Â  Â  Â  opt.textContent = txt;
Â  Â  Â  Â  paymentSelect.appendChild(opt);
Â  Â  Â  });
Â  Â  }
Â  }

Â  function loadCategories() {
Â  Â  const select = document.getElementById("categoryFilter");
Â  Â  const shortcutsContainer = document.getElementById("categoryShortcuts");

Â  Â  select.innerHTML = '<option value="">Todas as categorias</option>';
Â  Â  const categories = [...new Set(products.map(p => p.category))].filter(Boolean).sort();

Â  Â  // select
Â  Â  categories.forEach(cat => {
Â  Â  Â  const option = document.createElement("option");
Â  Â  Â  option.value = cat;
Â  Â  Â  option.innerText = cat;
Â  Â  Â  select.appendChild(option);
Â  Â  });

Â  Â  // atalhos
Â  Â  if (shortcutsContainer) {
Â  Â  Â  shortcutsContainer.innerHTML = "";

Â  Â  Â  const allBtn = document.createElement("button");
Â  Â  Â  allBtn.textContent = "Todos";
Â  Â  Â  allBtn.className = "cat-pill cat-pill-active";
Â  Â  Â  allBtn.dataset.categoryValue = "";
Â  Â  Â  shortcutsContainer.appendChild(allBtn);

Â  Â  Â  categories.forEach(cat => {
Â  Â  Â  Â  const btn = document.createElement("button");
Â  Â  Â  Â  btn.textContent = cat;
Â  Â  Â  Â  btn.className = "cat-pill";
Â  Â  Â  Â  btn.dataset.categoryValue = cat;
Â  Â  Â  Â  shortcutsContainer.appendChild(btn);
Â  Â  Â  });

Â  Â  Â  shortcutsContainer.addEventListener("click", (e) => {
Â  Â  Â  Â  const btn = e.target.closest(".cat-pill");
Â  Â  Â  Â  if (!btn) return;
Â  Â  Â  Â  const value = btn.dataset.categoryValue || "";

Â  Â  Â  Â  select.value = value;

Â  Â  Â  Â  shortcutsContainer.querySelectorAll(".cat-pill").forEach(b => {
Â  Â  Â  Â  Â  b.classList.toggle("cat-pill-active", b === btn);
Â  Â  Â  Â  });

Â  Â  Â  Â  applyFilters();
Â  Â  Â  });
Â  Â  }

Â  Â  select.addEventListener("change", () => {
Â  Â  Â  const value = select.value || "";
Â  Â  Â  if (shortcutsContainer) {
Â  Â  Â  Â  shortcutsContainer.querySelectorAll(".cat-pill").forEach(b => {
Â  Â  Â  Â  Â  const v = b.dataset.categoryValue || "";
Â  Â  Â  Â  Â  b.classList.toggle("cat-pill-active", v === value);
Â  Â  Â  Â  });
Â  Â  Â  }
Â  Â  Â  applyFilters();
Â  Â  });
Â  }

Â  // PromoÃ§Ã£o em destaque
Â  function renderPromo() {
Â  Â  const promoSection = document.getElementById("promoSection");
Â  Â  const promoCard = document.getElementById("promoCard");
Â  Â  if (!promoSection || !promoCard) return;

Â  Â  const promoProduct =
Â  Â  Â  products.find(p => p.promo) ||
Â  Â  Â  products.find(p => (p.category || "").toLowerCase() === "combos");

Â  Â  if (!promoProduct) {
Â  Â  Â  promoSection.style.display = "none";
Â  Â  Â  return;
Â  Â  }

Â  Â  const priceText = formatCurrency(promoProduct.price);

Â  Â  promoCard.innerHTML = `
Â  Â  Â  <div class="promo-label">Oferta especial â€¢ Hoje</div>
Â  Â  Â  <div class="promo-name">${promoProduct.name}</div>
Â  Â  Â  <div class="promo-desc">
Â  Â  Â  Â  PromoÃ§Ã£o assim, sÃ³ na Prime Drinks Express. Aproveite antes que acabe! VÃ¡lido atÃ© durar estoque.
Â  Â  Â  </div>
Â  Â  Â  <div class="promo-bottom">
Â  Â  Â  Â  <div class="promo-price">${priceText}</div>
Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  class="promo-btn"
Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  onclick="addPromoToCart('${promoProduct.id}')"
Â  Â  Â  Â  >
Â  Â  Â  Â  Â  <span>ğŸ›’</span> Adicionar combo ao pedido
Â  Â  Â  Â  </button>
Â  Â  Â  </div>
Â  Â  `;
Â  }

Â  function addPromoToCart(productId) {
Â  Â  const product = products.find(p => p.id == productId);
Â  Â  if (!product) return;

Â  Â  const existing = cart.find(item => item.id == productId);
Â  Â  const estoque = Number(product.estoque || 0);
Â  Â  const alreadyInCart = existing ? existing.quantity : 0;

Â  Â  if (alreadyInCart + 1 > estoque) {
Â  Â  Â  alert(`NÃ£o hÃ¡ estoque suficiente da promoÃ§Ã£o. Estoque disponÃ­vel: ${estoque}.`);
Â  Â  Â  return;
Â  Â  }

Â  Â  if (existing) {
Â  Â  Â  existing.quantity += 1;
Â  Â  } else {
Â  Â  Â  cart.push({
Â  Â  Â  Â  id: product.id,
Â  Â  Â  Â  name: product.name,
Â  Â  Â  Â  quantity: 1
Â  Â  Â  });
Â  Â  }
Â  Â  renderCart();
Â  }

Â  function renderProducts(list) {
Â  Â  const container = document.getElementById("productList");
Â  Â  container.innerHTML = "";

Â  Â  list.forEach(prod => {
Â  Â  Â  const estoque = Number(prod.estoque || 0);
Â  Â  Â  const isOut = estoque <= 0;
Â  Â  Â  const hasAtacado = prod.atacadoMinQty > 0 && prod.priceAtacado > 0;

Â  Â  Â  const card = document.createElement("div");
Â  Â  Â  card.className = "card";

Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  <img src="${prod.image}" alt="${prod.name}">
Â  Â  Â  Â  <div class="card-body">
Â  Â  Â  Â  Â  <div class="card-title">${prod.name}</div>
Â  Â  Â  Â  Â  <div class="category">${prod.category}</div>
Â  Â  Â  Â  Â  <div class="price">${formatCurrency(prod.price)}</div>
Â  Â  Â  Â  Â  ${
Â  Â  Â  Â  Â  Â  hasAtacado
Â  Â  Â  Â  Â  Â  Â  ? `<div class="stock">Atacado: ${formatCurrency(prod.priceAtacado)} a partir de ${prod.atacadoMinQty} un.</div>`
Â  Â  Â  Â  Â  Â  Â  : ""
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  <div class="stock ${isOut ? "stock-zero" : ""}">
Â  Â  Â  Â  Â  Â  ${isOut ? "Estoque: esgotado" : "Estoque: " + estoque}
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="card-footer">
Â  Â  Â  Â  Â  <div class="qty-row">
Â  Â  Â  Â  Â  Â  ${
Â  Â  Â  Â  Â  Â  Â  isOut
Â  Â  Â  Â  Â  Â  Â  Â  ? `<button class="btn-add btn-add-disabled" disabled>Produto esgotado</button>`
Â  Â  Â  Â  Â  Â  Â  Â  : `
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input id="qty-${prod.id}" type="number" min="1" placeholder="Qtd.">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn-add" onclick="addToCart('${prod.id}')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Adicionar ao pedido
Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  `
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  `;

Â  Â  Â  container.appendChild(card);
Â  Â  });
Â  }

Â  function applyFilters() {
Â  Â  const category = document.getElementById("categoryFilter").value;
Â  Â  const search = document
Â  Â  Â  .getElementById("searchInput")
Â  Â  Â  .value.toLowerCase()
Â  Â  Â  .trim();

Â  Â  const filtered = products.filter(p => {
Â  Â  Â  const matchesCategory = !category || p.category === category;
Â  Â  Â  const matchesSearch = !search || (p.name || "").toLowerCase().includes(search);
Â  Â  Â  return matchesCategory && matchesSearch;
Â  Â  });

Â  Â  renderProducts(filtered);
Â  }

Â  function getOrderType() {
Â  Â  const sel = document.getElementById("orderType");
Â  Â  return sel ? (sel.value || "entrega") : "entrega";
Â  }

Â  function getDeliveryFee() {
Â  Â  const orderType = getOrderType();
Â  Â  if (orderType === "retirada") return 0;

Â  Â  const select = document.getElementById("deliveryNeighborhood");
Â  Â  if (!select) return 0;
Â  Â  const Localidade = select.value;
Â  Â  if (Localidade && NEIGHBORHOODS[Localidade] != null) {
Â  Â  Â  return NEIGHBORHOODS[Localidade];
Â  Â  }
Â  Â  return 0;
Â  }

Â  function getPaymentMethod() {
Â  Â  const select = document.getElementById("paymentMethod");
Â  Â  return select ? select.value : "";
Â  }

Â  function getCreditFee(subtotal, deliveryFee) {
Â  Â  const method = (getPaymentMethod() || "").toLowerCase();
Â  Â  if (method.includes("crÃ©dito") || method.includes("credito")) {
Â  Â  Â  const base = subtotal + deliveryFee;
Â  Â  Â  return base * 0.04;
Â  Â  }
Â  Â  return 0;
Â  }

Â  function addToCart(productId) {
Â  Â  const input = document.getElementById(`qty-${productId}`);
Â  Â  let qty = parseInt(input.value, 10);

Â  Â  if (isNaN(qty) || qty <= 0) {
Â  Â  Â  alert("Informe uma quantidade vÃ¡lida.");
Â  Â  Â  return;
Â  Â  }

Â  Â  const product = products.find(p => p.id == productId);
Â  Â  if (!product) return;

Â  Â  const estoque = Number(product.estoque || 0);

Â  Â  const existing = cart.find(item => item.id == productId);
Â  Â  const alreadyInCart = existing ? existing.quantity : 0;

Â  Â  if (qty + alreadyInCart > estoque) {
Â  Â  Â  alert(
Â  Â  Â  Â  `Quantidade solicitada (${qty + alreadyInCart}) Ã© maior que o estoque disponÃ­vel (${estoque}).`
Â  Â  Â  );
Â  Â  Â  return;
Â  Â  }

Â  Â  if (existing) {
Â  Â  Â  existing.quantity += qty;
Â  Â  } else {
Â  Â  Â  cart.push({
Â  Â  Â  Â  id: product.id,
Â  Â  Â  Â  name: product.name,
Â  Â  Â  Â  quantity: qty
Â  Â  Â  });
Â  Â  }

Â  Â  input.value = "";
Â  Â  renderCart();
Â  }

Â  function renderCart() {
Â  Â  const container = document.getElementById("cartItems");
Â  Â  const totalEl = document.getElementById("cartTotal");
Â  Â  const subtotalEl = document.getElementById("cartSubtotal");
Â  Â  const deliveryEl = document.getElementById("cartDelivery");
Â  Â  const creditEl = document.getElementById("cartCreditFee");
Â  Â  const btn = document.getElementById("whatsCartButton");

Â  Â  container.innerHTML = "";

Â  Â  if (!cart.length) {
Â  Â  Â  container.innerHTML = `<div class="cart-empty">Seu pedido ainda estÃ¡ vazio. Adicione itens do catÃ¡logo para continuar.</div>`;
Â  Â  Â  if (subtotalEl) subtotalEl.textContent = "R$ 0,00";
Â  Â  Â  if (deliveryEl) deliveryEl.textContent = "R$ 0,00";
Â  Â  Â  if (creditEl) creditEl.textContent = "R$ 0,00";
Â  Â  Â  totalEl.textContent = "R$ 0,00";
Â  Â  Â  btn.disabled = true;
Â  Â  Â  return;
Â  Â  }

Â  Â  let subtotal = 0;

Â  Â  cart.forEach(item => {
Â  Â  Â  const unitPrice = getEffectiveUnitPrice(item);
Â  Â  Â  const lineTotal = unitPrice * item.quantity;
Â  Â  Â  subtotal += lineTotal;

Â  Â  Â  const row = document.createElement("div");
Â  Â  Â  row.className = "cart-item";

Â  Â  Â  row.innerHTML = `
Â  Â  Â  Â  <div class="cart-item-left">
Â  Â  Â  Â  Â  <span class="cart-item-name">${item.name}</span>
Â  Â  Â  Â  Â  <span class="cart-item-qty">${item.quantity} x ${formatCurrency(unitPrice)}</span>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="cart-item-right">
Â  Â  Â  Â  Â  ${formatCurrency(lineTotal)}
Â  Â  Â  Â  </div>
Â  Â  Â  `;

Â  Â  Â  container.appendChild(row);
Â  Â  });

Â  Â  const deliveryFee = getDeliveryFee();
Â  Â  const creditFee = getCreditFee(subtotal, deliveryFee);
Â  Â  const total = subtotal + deliveryFee + creditFee;

Â  Â  if (subtotalEl) subtotalEl.textContent = formatCurrency(subtotal);
Â  Â  if (deliveryEl) deliveryEl.textContent = formatCurrency(deliveryFee);
Â  Â  if (creditEl) creditEl.textContent = formatCurrency(creditFee);
Â  Â  totalEl.textContent = formatCurrency(total);

Â  Â  btn.disabled = !cart.length || !isOpenNow;
Â  }


// ***************************************************************
// ğŸš¨ FUNÃ‡ÃƒO ATUALIZADA PARA REGISTRAR NA PLANILHA GOOGLE ğŸš¨
// ***************************************************************

Â  function sendCartToWhatsApp() {
Â  Â  if (!cart.length) return;

Â  Â  if (!isOpenNow) {
Â  Â  Â  alert("No momento estamos fora do horÃ¡rio de atendimento.\n\nNosso horÃ¡rio Ã©: " + SCHEDULE_TEXT);
Â  Â  Â  return;
Â  Â  }

    // ValidaÃ§Ã£o de Campos ObrigatÃ³rios
    const clienteNomeInput = document.getElementById("inputNome");
    const clienteNome = clienteNomeInput ? clienteNomeInput.value.trim() : "";
    
    if (!clienteNome) {
        alert("Por favor, preencha seu NOME no carrinho para finalizar o pedido.");
        clienteNomeInput.focus();
        return;
    }

    const orderType = getOrderType();
    if (orderType === "") {
        alert("Por favor, selecione como vocÃª prefere RECEBER o pedido.");
        document.getElementById("orderType").focus();
        return;
    }

    const paymentMethod = getPaymentMethod();
    if (paymentMethod === "") {
        alert("Por favor, selecione a FORMA DE PAGAMENTO.");
        document.getElementById("paymentMethod").focus();
        return;
    }

    const neighborhoodSelect = document.getElementById("deliveryNeighborhood");
    const Localidade = neighborhoodSelect ? neighborhoodSelect.value : "";
    if (orderType === "entrega" && Localidade === "") {
        alert("Por favor, selecione a LOCALIDADE/BAIRRO para a entrega.");
        neighborhoodSelect.focus();
        return;
    }
    
Â  Â  const notesEl = document.getElementById("orderNotes");
Â  Â  const notes = notesEl ? notesEl.value.trim() : "";

Â  Â  let lines = [];
Â  Â  lines.push("OlÃ¡! Gostaria de fazer o seguinte pedido:");
Â  Â  lines.push("");

Â  Â  let subtotal = 0;
    let pedidoDetalhes = ""; // String formatada dos itens para a planilha
    
Â  Â  cart.forEach(item => {
Â  Â  Â  const unitPrice = getEffectiveUnitPrice(item);
Â  Â  Â  const lineTotal = unitPrice * item.quantity;
Â  Â  Â  subtotal += lineTotal;
      
      const itemLine = `${item.quantity}x ${item.name} (${formatCurrency(unitPrice)}) = ${formatCurrency(lineTotal)}`;
Â  Â  Â  lines.push(itemLine);
      pedidoDetalhes += itemLine + " | "; // Junta em uma string com separador para a planilha
Â  Â  });
    
    // Limpa a string de detalhes para a planilha
    pedidoDetalhes = pedidoDetalhes.slice(0, -3).trim(); 

Â  Â  const deliveryFee = getDeliveryFee();
Â  Â  const creditFee = getCreditFee(subtotal, deliveryFee);
Â  Â  const total = subtotal + deliveryFee + creditFee;

    // Monta o restante da mensagem do WhatsApp
    lines.push("");
    lines.push("--- Resumo ---");
    lines.push(`Subtotal: ${formatCurrency(subtotal)}`);
    lines.push(`Entrega (${Localidade || 'N/A'}): ${formatCurrency(deliveryFee)}`);
    lines.push(`AcrÃ©scimo CrÃ©dito: ${formatCurrency(creditFee)}`);
    lines.push(`*TOTAL GERAL:* ${formatCurrency(total)}`);
    lines.push("--- Detalhes ---");
    lines.push(`*Nome:* ${clienteNome}`);
    lines.push(`*Recebimento:* ${orderType === 'entrega' ? `Entrega (${Localidade})` : 'Retirada no local'}`);
    lines.push(`*Pagamento:* ${paymentMethod}`);
    if (notes) {
        lines.push(`*ObservaÃ§Ãµes:* ${notes}`);
    }
    lines.push("");
    lines.push("Aguardando confirmaÃ§Ã£o!");

Â  Â  const message = encodeURIComponent(lines.join("\n"));
    const whatsappUrl = `https://api.whatsapp.com/send?phone=${WHATSAPP_NUMBER}&text=${message}`;

    // 1. PREPARAR DADOS PARA O APPS SCRIPT
    // ATENÃ‡ÃƒO: As chaves (nome/valor) devem ser as mesmas que vocÃª usou no seu CÃ³digo.gs
    const formData = new URLSearchParams({
        clienteNome: clienteNome,
        pedidoDetalhes: pedidoDetalhes,
        valorTotal: total.toFixed(2), // Formata para duas casas decimais
        tipoPedido: orderType,
        localidade: Localidade || (orderType === 'retirada' ? 'Retirada' : 'N/A'),
        pagamento: paymentMethod,
        observacoes: notes
    }).toString();
    
    // Desabilita o botÃ£o para evitar cliques duplos enquanto envia
    const btn = document.getElementById("whatsCartButton");
    btn.disabled = true;
    btn.textContent = "Registrando e enviando...";

    // 2. ENVIAR DADOS PARA O APPS SCRIPT (AssÃ­ncrono)
    fetch(ORDER_LOG_ENDPOINT, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded'
        },
        body: formData
    })
    .then(response => {
        // Tenta processar a resposta, mas nÃ£o para o fluxo
        return response.json().catch(() => ({ resultado: 'falha', mensagem: 'Erro de resposta do servidor.' }));
    })
    .then(data => {
        if (data.resultado !== 'sucesso') {
            console.warn("Falha no registro da Planilha. Enviando para o WhatsApp mesmo assim.", data);
        } else {
            console.log("Pedido registrado na Planilha com sucesso.", data);
        }
    })
    .catch(error => {
        console.error('Erro de conexÃ£o ao tentar registrar o pedido (Planilha Offline ou URL errada).', error);
        alert('AtenÃ§Ã£o: Houve um erro ao tentar registrar o pedido no sistema interno. Envie no WhatsApp para confirmar!');
    })
    .finally(() => {
        // 3. FINALIZAR: REDIRECIONAR PARA O WHATSAPP
        btn.disabled = false;
        btn.textContent = "Finalizar pedido no WhatsApp";
        window.location.href = whatsappUrl;
    });
  }

Â  document
Â  Â  .getElementById("whatsCartButton")
Â  Â  .addEventListener("click", sendCartToWhatsApp);

Â  // InicializaÃ§Ã£o
Â  document.addEventListener("DOMContentLoaded", async () => {
Â  Â  await loadProductsFromSheet();
Â  Â  await loadTaxasFromSheet();
Â  Â  loadCategories();
Â  Â  renderPromo();
Â  Â  checkStoreOpen();
Â  Â  applyFilters();
Â  Â  
Â  Â  // Event listeners para atualizar o carrinho ao mudar opÃ§Ãµes
Â  Â  document.getElementById("orderType").addEventListener("change", renderCart);
Â  Â  document.getElementById("paymentMethod").addEventListener("change", renderCart);
Â  Â  document.getElementById("deliveryNeighborhood").addEventListener("change", renderCart);
Â  Â  document.getElementById("searchInput").addEventListener("input", applyFilters);
Â  });
</script>
</body>
</html>
